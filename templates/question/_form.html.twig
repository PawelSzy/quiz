{{ form_start(form) }}
    <ul class="tags" data-prototype="{{ form_widget(form.answers.vars.prototype)|e('html_attr') }}">
        {{ form(form) }}
        <button class="btn">{{ button_label|default('Save') }}</button>
    </ul>
{{ form_end(form) }}

<script>
    $(document).ready(function () {
        var $collectionHolder;

        // setup an "add a answer" link
        var $addAnswerButton = $('<button type="button" class="add_answer_link">Add a answer</button>');
        var $newLinkLi = $('<li></li>').append($addAnswerButton);

        jQuery(document).ready(function() {
            // Get the ul that holds the collection of answers
//        $collectionHolder = $('ul.answers');
            $collectionHolder = $('ul.tags');


            // add the "add a answer" anchor and li to the answers ul
            $collectionHolder.append($newLinkLi);

            // count the current form inputs we have (e.g. 2), use that as the new
            // index when inserting a new item (e.g. 2)
            $collectionHolder.data('index', $collectionHolder.find(':input').length);

            $addAnswerButton.on('click', function(e) {
                // add a new answer form (see next code block)
                addAnswerForm($collectionHolder, $newLinkLi);
            });

            function addAnswerForm($collectionHolder, $newLinkLi) {
                // Get the data-prototype explained earlier
                var prototype = $collectionHolder.data('prototype');

                // get the new index
                var index = $collectionHolder.data('index');

                var newForm = prototype;

                // Display the form in the page in an li, before the "Add a answer" link li
                var $newFormLi = $('<li></li>').append(newForm);
                $newLinkLi.before($newFormLi);
            }

        });
    })

</script>
